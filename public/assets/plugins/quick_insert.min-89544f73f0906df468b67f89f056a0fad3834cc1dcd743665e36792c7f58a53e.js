!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(p){"use strict";p=p&&p.hasOwnProperty("default")?p["default"]:p,Object.assign(p.DEFAULTS,{quickInsertButtons:["image","video","embedly","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"],quickInsertEnabled:!0}),p.QUICK_INSERT_BUTTONS={},p.DefineIcon("quickInsert",{SVG_KEY:"add",template:"svg"}),p.RegisterQuickInsertButton=function(e,t){p.QUICK_INSERT_BUTTONS[e]=Object.assign({undo:!0},t)},p.RegisterQuickInsertButton("image",{icon:"insertImage",requiredPlugin:"image",title:"Insert Image",undo:!1,callback:function(){var e=this,t=e.$;e.shared.$qi_image_input||(e.shared.$qi_image_input=t(document.createElement("input")).attr("accept","image/"+e.opts.imageAllowedTypes.join(", image/").toLowerCase()).attr("name","quickInsertImage"+this.id).attr("style","display: none;").attr("type","file"),t("body").first().append(e.shared.$qi_image_input),e.events.$on(e.shared.$qi_image_input,"change",function(){var e=t(this).data("inst");this.files&&(e.quickInsert.hide(),e.image.upload(this.files)),t(this).val("")},!0)),e.$qi_image_input=e.shared.$qi_image_input,e.helpers.isMobile()&&e.selection.save(),e.events.disableBlur(),e.$qi_image_input.data("inst",e)[0].click()}}),p.RegisterQuickInsertButton("video",{icon:"insertVideo",requiredPlugin:"video",title:"Insert Video",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of the video you want to insert."));e&&this.video.insertByURL(e)}}),p.RegisterQuickInsertButton("embedly",{icon:"embedly",requiredPlugin:"embedly",title:"Embed URL",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of any web content you want to insert."));e&&this.embedly.add(e)}}),p.RegisterQuickInsertButton("table",{icon:"insertTable",requiredPlugin:"table",title:"Insert Table",callback:function(){this.table.insert(2,2)}}),p.RegisterQuickInsertButton("ol",{icon:"formatOL",requiredPlugin:"lists",title:"Ordered List",callback:function(){this.lists.format("OL")}}),p.RegisterQuickInsertButton("ul",{icon:"formatUL",requiredPlugin:"lists",title:"Unordered List",callback:function(){this.lists.format("UL")}}),p.RegisterQuickInsertButton("hr",{icon:"insertHR",title:"Insert Horizontal Line",callback:function(){this.commands.insertHR()}}),p.PLUGINS.quickInsert=function(o){function n(e){var t,n,i;if(t=e.offset().top-o.$box.offset().top,n=(o.$iframe&&o.$iframe.offset().left||0)+e.offset().left<d.outerWidth()?e.offset().left+d.outerWidth():0-d.outerWidth(),o.opts.enter!=p.ENTER_BR?i=(d.outerHeight()-e.outerHeight())/2:(f(document.createElement("span")).html(p.INVISIBLE_SPACE).insertAfter(e),i=(d.outerHeight()-e.next().outerHeight())/2,e.next().remove()),o.opts.iframe){var s=o.helpers.getPX(o.$wp.find(".fr-iframe").css("padding-top"));t+=o.$iframe.offset().top+s}d.hasClass("fr-on")&&0<=t&&c.css("top",t-i),0<=t&&t-Math.abs(i)<=o.$box.outerHeight()-e.outerHeight()?(d.hasClass("fr-hidden")&&(d.hasClass("fr-on")&&a(),d.removeClass("fr-hidden")),d.css("top",t-i)):d.hasClass("fr-visible")&&(d.addClass("fr-hidden"),l()),d.css("left",n)}function s(e){d||function t(){o.shared.$quick_insert||(o.shared.$quick_insert=f(document.createElement("div")).attr("class","fr-quick-insert").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'+o.language.translate("Quick Insert")+'">'+o.icon.create("quickInsert")+"</a>")),d=o.shared.$quick_insert,o.tooltip.bind(o.$box,".fr-quick-insert > a.fr-floating-btn"),o.events.on("destroy",function(){f("body").first().append(d.removeClass("fr-on")).css("left",-9999).css("top",-9999),c&&(l(),f("body").first().append(c))},!0),o.events.on("shared.destroy",function(){d.html("").removeData().remove(),d=null,c&&(c.html("").removeData().remove(),c=null)},!0),o.events.on("commands.before",r),o.events.on("commands.after",function(){o.popups.areVisible()||i()}),o.events.bindClick(o.$box,".fr-quick-insert > a",a),o.events.bindClick(o.$box,".fr-qi-helper > a.fr-btn",function(e){var t=f(e.currentTarget).data("cmd");if(!1===o.events.trigger("quickInsert.commands.before",[t]))return!1;p.QUICK_INSERT_BUTTONS[t].callback.apply(o,[e.currentTarget]),p.QUICK_INSERT_BUTTONS[t].undo&&o.undo.saveStep(),o.events.trigger("quickInsert.commands.after",[t]),o.quickInsert.hide()}),o.events.$on(o.$wp,"scroll",u),o.events.$on(o.$tb,"transitionend",".fr-more-toolbar",u)}(),d.hasClass("fr-on")&&l(),o.$box.append(d),n(e),d.data("tag",e),d.addClass("fr-visible")}function i(){if(o.core.hasFocus()){var e=o.selection.element();if(o.opts.enter==p.ENTER_BR||o.node.isBlock(e)||(e=o.node.blockParent(e)),o.opts.enter==p.ENTER_BR&&!o.node.isBlock(e)){var t=o.node.deepestParent(e);t&&(e=t)}var n=function n(){return o.opts.enter!=p.ENTER_BR&&o.node.isEmpty(e)&&0<=o.opts.quickInsertTags.indexOf(e.tagName.toLowerCase())},i=function i(){return o.opts.enter==p.ENTER_BR&&("BR"==e.tagName&&(!e.previousSibling||"BR"==e.previousSibling.tagName||o.node.isBlock(e.previousSibling))||o.node.isEmpty(e)&&(!e.previousSibling||"BR"==e.previousSibling.tagName||o.node.isBlock(e.previousSibling))&&(!e.nextSibling||"BR"==e.nextSibling.tagName||o.node.isBlock(e.nextSibling)))};e&&(n()||i())?d&&d.data("tag").is(f(e))&&d.hasClass("fr-on")?l():o.selection.isCollapsed()&&s(f(e)):r()}}function r(){d&&(d.hasClass("fr-on")&&l(),d.removeClass("fr-visible fr-on"),d.css("left",-9999).css("top",-9999))}function a(e){if(e&&e.preventDefault(),d.hasClass("fr-on")&&!d.hasClass("fr-hidden"))l();else{if(!o.shared.$qi_helper){for(var t=o.opts.quickInsertButtons,n='<div class="fr-qi-helper">',i=0,s=0;s<t.length;s++){var r=p.QUICK_INSERT_BUTTONS[t[s]];r&&(!r.requiredPlugin||p.PLUGINS[r.requiredPlugin]&&0<=o.opts.pluginsEnabled.indexOf(r.requiredPlugin))&&(n+='<a class="fr-btn fr-floating-btn" role="button" title="'+o.language.translate(r.title)+'" tabIndex="-1" data-cmd="'+t[s]+'" style="transition-delay: '+.025*i+++'s;">'+o.icon.create(r.icon)+"</a>")}n+="</div>",o.shared.$qi_helper=f(n),o.tooltip.bind(o.shared.$qi_helper,"a.fr-btn"),o.events.$on(o.shared.$qi_helper,"mousedown",function(e){e.preventDefault()},!0)}c=o.shared.$qi_helper,o.$box.append(c),setTimeout(function(){c.css("top",parseFloat(d.css("top"))),c.css("left",parseFloat(d.css("left"))+d.outerWidth()),c.find("a").addClass("fr-size-1"),d.addClass("fr-on")},10)}}function l(){var n=o.$box.find(".fr-qi-helper");n.length&&function(){for(var t=n.find("a"),e=0;e<t.length;e++)!function(e){setTimeout(function(){n.children().eq(t.length-1-e).removeClass("fr-size-1")},25*e)}(e);setTimeout(function(){n.css("left",-9999),d.hasClass("fr-hidden")||d.removeClass("fr-on")},25*e)}()}function u(){d.hasClass("fr-visible")&&n(d.data("tag"))}var d,c,f=o.$;return{_init:function e(){if(!o.$wp||!o.opts.quickInsertEnabled)return!1;o.popups.onShow("image.edit",r),o.events.on("mouseup",i),o.helpers.isMobile()&&o.events.$on(f(o.o_doc),"selectionchange",i),o.events.on("blur",r),o.events.on("keyup",i),o.events.on("keydown",function(){setTimeout(function(){i()},0)})},hide:r}}});